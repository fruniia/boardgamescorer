@page "/playerscores"
@page "/playerscores/{PlayerName}"
@inject GameState gameState
@inject NavigationManager NavigationManager


<h3>Enter Scores for @player!.Name</h3>

<EditForm Model="player">
    @for (int i = 0; i < scores.Count; i++)
    {
        <div>
            <label for="score">Score @((i + 1)):</label>
            <input type="number" @bind="scores[i]" />
        </div>
    }
    <button @onclick="SaveScores">Save Scores</button>
</EditForm>

<p>Totalscore: @player.TotalScore</p>
@code {
    [Parameter]
    public KingdominoPlayer? player { get; set; }
    [Parameter]
    public string? PlayerName { get; set; }

    protected override void OnInitialized()
    {
        player = gameState.Players.Where(x => x.Name == PlayerName).FirstOrDefault();
        base.OnInitialized();
    }

    private List<int> scores = new List<int> { 0, 0, 0, 0, 0 }; // Example for 5 scores per player

    private void SaveScores()
    {   
        if(scores is not null)
        {
            player.TotalScore = scores.Sum();
        }
        // Navigate to the next player's form or save the data
    }
}
