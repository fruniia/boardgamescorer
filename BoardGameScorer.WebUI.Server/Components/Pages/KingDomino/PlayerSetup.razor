@page "/queendomino/"
@using BoardGameScorer.WebUI.Server.Components.Kingdomino
@inject IGamesService<KingdominoPlayer> gameService
@inject NavigationManager navigationManager
@layout KingdominoLayout
@rendermode InteractiveServer

<h3 class="mb-3">Setup the players for your game</h3>
<EditForm EditContext="@_editContext" FormName="addPlayers" OnValidSubmit="AddNumberOfPlayers">
	<DataAnnotationsValidator />
	<ValidationSummary />
	<div class="mb-3 form-group">
		<label for="numPlayers" class="mb-3">Number of Players:</label>
		<NumberInput TValue="int" id="numPlayers" @bind-Value=@SetUp!.NumberOfPlayers required />
		<ValidationMessage For="@(() => @SetUp!.NumberOfPlayers)" />
	</div>
	<Button Color="ButtonColor.Info" Outline="true" Type="ButtonType.Submit" Class="mb-3">
		@(_hasPlayers ? "Update number of players" : "Add number of players")
	</Button>
</EditForm>

@if (SetUp!.NumberOfPlayers > 0)
{
	<div class="mb-3 mt-3">
		<h4>Enter player names</h4>
		@if (SetUp!.Players.Count > 0)
		{
			@foreach (var player in SetUp.Players)
			{
				<div class="mb-3 form-group">
					<label for="@player.Id">Player @player.Id:</label>
					<input type="text" id="@player.Id" @bind=@player.Name />
					@if (_hasPlayers && player.Name is not "")
					{
					}
				</div>
			}
			<Button Color="ButtonColor.Info" Outline="true" @onsubmit="SavePlayer" Type="ButtonType.Submit">Save players names</Button>
		}
	</div>
}
